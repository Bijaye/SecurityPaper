var Demandbase=window.Demandbase||{};
Demandbase.Config={clientId:"QsKe96BJ",nonCompanyDefault:null,nonWatchDefault:null,getDomain:null,ads:{key:null,pixels:{ad:null,rt:null,cn:null}},analytics:{key:null,fieldMap:null},forms:{key:"eba779c7f412763af5d9e811908ab2274b78f024",emailID:"Email",companyID:"Company",fieldMap:{},toggleFieldList:["db_employee_count","db_country_name"],getToggleElement:function(a){return 0<this.djq(".mktoFormCol").length?this.djq("#"+a).parents(".mktoFormCol"):this.djq("#"+a).parents("li")},getToggleFieldValue:function(a){return this.djq("#"+
a).val()}},isFormPage:function(){var a=document.getElementById("Company")||null,b=document.getElementById("Email")||null;return a&&b?!0:!1}};"use strict";"undefined"===typeof window.console&&(window.console={log:function(){},debug:function(){}});"undefined"===typeof window.localStorage&&(window.localStorage={getItem:function(){},setItem:function(){}});"undefined"===typeof JSON&&(JSON={stringify:function(){},parse:function(){}});
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});Demandbase.Connectors=window.Demandbase.Connectors||{};
Demandbase.utils={name:"Demandbase API Utilities",logging:Demandbase.Config.logging||!1,debug:Demandbase.Config.debug||!1,callbackStack:[],getQueryParam:function(a){var b={},c=window.location.search.substring(1),d=c.split("&");if(!c)return"";for(c=0;c<d.length;c++){var e=d[c].split("=");b[e[0]]=e[1]}return b[a]||""},flattenData:function(a){for(var b in a)if("object"==typeof a[b]&&null!==a[b]&&a.hasOwnProperty(b)){for(var c in a[b])a[b+"_"+c]=a[b][c];delete a[b]}return a},log:function(a){("undefined"!==
typeof window.console&&(this.logging||"true"===this.getQueryParam("db_logging"))||Demandbase.Config.logging)&&window.console.log("DB: "+a)},callback:function(a){try{var b=Demandbase.utils.callbackStack;Demandbase.utils.log("Running Demandbase.utils.callback");for(var c in b){var d=b[c];"function"===typeof d&&(d.call(Demandbase,a),this.log("Running callback..."))}}catch(e){this.log(e+" : "+e.stack),this.debug&&alert(e.stack)}},registerCallback:function(a){try{var b=Demandbase.utils.callbackStack,c=
Demandbase.IP.CompanyProfile;-1==b.indexOf(a)&&b.push(a);c&&a.call(Demandbase,[c])}catch(d){this.log(d+" : "+d.stack),this.debug&&alert(d.stack)}},getAttrValue:function(a,b){var c=Demandbase.Config.nonCompanyDefault||Demandbase.utils.tokens.DFLT_NON_COMPANY,d=Demandbase.Config.nonWatchDefault||Demandbase.utils.tokens.DFLT_NON_AW,e={city:"registry_city",state:"registry_state",zip:"registry_zip_code",country:"registry_country_code",country_name:"registry_country",latitude:"registry_latitude",longitude:"registry_longitude"}[b]||
"",e=a[b]||a[e]||c,c=(a.company_name||c)!==c;return!1===a[b]?"false":-1!==b.indexOf("watch_list_")&&c?a[b]||d:e},loadDebugFile:function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0],c=Demandbase.Config.clientId+".js";a.async=!0;a.id="db_debug_lib";a.src=("https:"==document.location.protocol?"https://":"http://")+"scripts.demandbase.com/"+c;b.parentNode.insertBefore(a,b);this.log("Loaded Debug library...")},loadScript:function(a,b,c){if(a){c=document.createElement("script");
var d=document.getElementsByTagName("script")[0],e="https:"==document.location.protocol?"https:":"http:";c.async=!0;"undefined"!==typeof b&&b&&(c.id=b);0==a.indexOf("//")?a=e+a:0!==a.indexOf("http:")&&0!==a.indexOf("https:")&&(a=e+"//"+a);c.src=a;d.parentNode.insertBefore(c,d);this.log("Loaded: "+a)}else this.log("URL not provided.")},loadFormModule:function(a){if("function"===typeof Demandbase.Config.isFormPage&&Demandbase.Config.isFormPage()){var b=this.tokens.URL_FORM_MODULE;"undefined"!==typeof a&&
"undefined"!==typeof a.debug&&a.debug&&(b=this.tokens.URL_FORM_MODULE_DEBUG);this.loadScript(b,"db_form_module");window.dbAsyncInit=function(){Demandbase.Connectors.WebForm.connect(Demandbase.Config.forms)}}},tokens:{ERR_NO_AUTH_KEY:"ERR_NO_AUTH_KEY",ERR_NO_PIXEL_ID:"ERR_NO_PIXEL_ID",QS_USE_TEST_IP:"db_useTestIp",QS_USE_TEST_DOMAIN:"db_useTestDomain",QS_QUERY_IP:"db_ip",QS_QUERY_DOMAIN:"db_domain",QS_ENABLE_LOG:"db_logging",QS_ENABLE_DEBUG:"db_debug",DFLT_NON_COMPANY:"(Non-Company Visitor)",DFLT_NON_AW:"(Non-AccountWatch Visitor)",
URL_FORM_MODULE:"scripts.demandbase.com/formWidget.js",URL_FORM_MODULE_DEBUG:"scripts.demandbase.com/formWidgetDebug.js",URL_IP_API:"api.demandbase.com/api/v2/ip.json",URL_DOMAIN_API:"api.demandbase.com/api/v1/domain.json",URL_AD_PIXEL:"a.company-target.com/pixel?type=js&id="}};
Demandbase.IP={name:"Demandbase IP API Wrapper",key:Demandbase.Config.key||Demandbase.Config.analytics.key||Demandbase.Config.ads.key||Demandbase.Config.forms.key||Demandbase.utils.tokens.ERR_NO_AUTH_KEY,CompanyProfile:null,useTestValue:Demandbase.utils.getQueryParam(Demandbase.utils.tokens.QS_USE_TEST_IP)||Demandbase.Config.useTestIp||!1,testValue:Demandbase.utils.getQueryParam(Demandbase.utils.tokens.QS_QUERY_IP)||Demandbase.Config.testIp||"No Test IP Set",_callback:function(a){if(!a)return"";try{var b=
Demandbase.utils;this.CompanyProfile=a=b.flattenData(a);b.callback(a);b.loadFormModule()}catch(c){Demandbase.utils.log("IP API Error: "+c+" : "+c.stack)}},load:function(a,b){try{if(this.key!==Demandbase.utils.tokens.ERR_NO_AUTH_KEY||"undefined"!==typeof a){var c,d=document.URL,e="undefined"!==typeof a?a:this.key,g="undefined"!==typeof b&&!1===b?"Demandbase.Connectors.CTA.track":"Demandbase.IP._callback";window.top!==window.self&&(d=document.referrer);d=encodeURIComponent(d);c=Demandbase.utils.tokens.URL_IP_API+
"?key="+e+"&referrer="+encodeURIComponent(document.referrer)+"&page="+d+"&page_title="+encodeURIComponent(document.title)+"&callback="+g;this.useTestValue&&(c=c+"&query="+this.testValue);Demandbase.utils.log("Calling IP API...");Demandbase.utils.loadScript(c,"db_ip_api")}else Demandbase.utils.log("IP API query cancelled - check auth key.")}catch(f){Demandbase.utils.log("IP API Error: "+f+" : "+f.stack)}}};
Demandbase.Domain={name:"Demandbase Domain API Wrapper",key:Demandbase.Config.key||Demandbase.Config.analytics.key||Demandbase.Config.ads.key||Demandbase.Config.forms.key||Demandbase.utils.tokens.ERR_NO_AUTH_KEY,CompanyProfile:null,useTestValue:Demandbase.utils.getQueryParam(Demandbase.utils.tokens.QS_USE_TEST_DOMAIN)||Demandbase.Config.useTestDomain||!1,testValue:Demandbase.utils.getQueryParam(Demandbase.utils.tokens.QS_QUERY_DOMAIN)||Demandbase.Config.testDomain||"No Test Domain Set",_callback:function(a){try{var b=
Demandbase.utils;a.domain||a.person?(a=a.domain||a.person,this.CompanyProfile=a=b.flattenData(a)):Demandbase.utils.log("Demandbase.Domain: No company profile available for domain: "+this.getDomain())}catch(c){Demandbase.utils.log("Domain API Error: "+c+" : "+c.stack)}},load:function(){if("function"===typeof Demandbase.Config.getDomain&&this.key!==Demandbase.utils.tokens.ERR_NO_AUTH_KEY){var a;a=document.URL;window.top!==window.self&&(a=document.referrer);a=encodeURIComponent(a);a=Demandbase.utils.tokens.URL_DOMAIN_API+
"?key="+this.key+"&referrer="+encodeURIComponent(document.referrer)+"&page="+a+"&page_title="+encodeURIComponent(document.title)+"&callback=Demandbase.Domain._callback";a=this.useTestValue?a+"&query="+this.testValue:a+"&query="+this.getDomain();Demandbase.utils.loadScript(a,"db_domain_api");Demandbase.utils.log("Calling Domain API...")}else Demandbase.utils.log("Domain API query cancelled - check auth key or Config.getDomain")},getDomain:function(a){try{if(this.useTestValue)return this.testValue;
if("function"===typeof Demandbase.Config.getDomain)return Demandbase.Config.getDomain.call(Demandbase);Demandbase.utils.log("Warning: Config.getDomain fcn not defined.");return"getVisitorDomain function is not defined"}catch(b){Demandbase.utils.log("getDomain Error: "+b+" : "+b.stack)}}};(function(){Demandbase.init=function(){Demandbase.IP.load();"function"===typeof Demandbase.Config.getDomain&&Demandbase.Config.getDomain()&&Demandbase.Domain.load()}})();
(function(){var a=Demandbase.utils.callback;Demandbase.utils.callback=function(b){Demandbase.utils.log("Running extcallback...");a.apply(Demandbase.utils,[b]);"function"===typeof Demandbase.Config.callback&&Demandbase.Config.callback.call(Demandbase,b)}})();Demandbase.init();
